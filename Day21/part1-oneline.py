print(next(scores[1-turn[0]] * ctr[0] for poss in [[int(line.strip()[28:]) for line in open('input.txt')]] for scores,ctr,turn in [([0,0],[0],[1])] for _ in [[(ctr.append(ctr.pop() + 3), turn.append(1 - turn.pop()), poss.insert(turn[0], (poss.pop(turn[0]) + 3 * ctr[0] - 4) % 10 + 1), scores.insert(turn[0], scores.pop(turn[0]) + poss[turn[0]])) for _ in range(2000) if all(s < 1000 for s in scores)]]))
