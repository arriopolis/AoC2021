print(next(z[-1] * sum(sum(c for c in r if c >= 0) for r in x[0][i]) for x in [[list(filter(bool, map(lambda x : x.strip(), open('input.txt').readlines())))]] for y in [list(map(int,x[0].pop(0).split(',')))] for z in [[]] for _ in [[x.append([list(map(lambda x : list(map(int,x.split())),l[5*i:5*(i+1)])) for i in range(len(l)//5)]) for l in [x.pop()]]] for _ in [[(x.append([[[-1 if c == n else c for c in r] for r in b] for b in x.pop()]),z.append(n)) for n in y if not any(any(sum(r) == -5 for r in b) or any(sum(c) == -5 for c in zip(*b)) for b in x[0])]] for i in [i for i,b in enumerate(x[0]) if any(sum(r) == -5 for r in b) or any(sum(c) == -5 for c in zip(*b))]))
